name: Keep Render Alive

on:
  schedule:
    # UTC ê¸°ì¤€: ë§¤ 6ì‹œê°„ë§ˆë‹¤ (í•œêµ­ì‹œê°„ ê¸°ì¤€: 09:00, 15:00, 21:00, 03:00)
    - cron: '0 */6 * * *'
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼ í™œì„±í™”

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    
    steps:
      - name: ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v3
      
      - name: Backend í•‘ (1ì°¨)
        run: |
          echo "ğŸ”„ Backend í•‘ ì¤‘..."
          curl -f https://eva-nexio-hub-smt.onrender.com/health || \
          echo "âš ï¸ Backend ì‘ë‹µ ì—†ìŒ (ì •ìƒ - ì²« ì‹œì‘)"
        continue-on-error: true
      
      - name: Frontend í•‘ (1ì°¨)
        run: |
          echo "ğŸ”„ Frontend í•‘ ì¤‘..."
          curl -f https://eva-nexio-hub-smt-frontend.onrender.com || \
          echo "âš ï¸ Frontend ì‘ë‹µ ì—†ìŒ (ì •ìƒ - ì²« ì‹œì‘)"
        continue-on-error: true
      
      - name: ëŒ€ê¸° (20ì´ˆ)
        run: |
          echo "â³ ì„œë²„ ì‹œì‘ ëŒ€ê¸° ì¤‘..."
          sleep 20
      
      - name: Backend í•‘ (2ì°¨)
        run: |
          echo "âœ… Backend ì¬í™•ì¸ ì¤‘..."
          curl -f https://eva-nexio-hub-smt.onrender.com/health || exit 0
        continue-on-error: true
      
      - name: Frontend í•‘ (2ì°¨)
        run: |
          echo "âœ… Frontend ì¬í™•ì¸ ì¤‘..."
          curl -f https://eva-nexio-hub-smt-frontend.onrender.com || exit 0
        continue-on-error: true
      
      - name: ì™„ë£Œ
        run: echo "âœ¨ Keep-alive ì™„ë£Œ!"